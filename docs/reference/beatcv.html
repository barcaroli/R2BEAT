<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Computation of coefficient of variation (CV) for a given multivariate multiple allocation — beat.cv • R2BEAT</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Computation of coefficient of variation (CV) for a given multivariate multiple allocation — beat.cv" />
<meta property="og:description" content="Compute the coefficients of variation considering a given multivariate optimal allocation." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">R2BEAT</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/R2BEAT.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/barcaroli/R2BEAT/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computation of coefficient of variation (CV) for a given multivariate multiple allocation</h1>
    
    <div class="hidden name"><code>beatcv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Compute the coefficients of variation considering a given multivariate optimal allocation.</p>
    </div>

    <pre class="usage"><span class='fu'>beat.cv</span>(<span class='no'>n_file</span>, <span class='no'>stratif</span>, <span class='no'>errors</span>, <span class='no'>des_file</span>, <span class='no'>psu_file</span>, <span class='no'>rho</span>, <span class='no'>epsilon</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>n_file</th>
      <td><p>Data frame containing the sample size allocated in each stratum, for more details, e.g.,<a href='allocation.html'>allocation</a>.</p></td>
    </tr>
    <tr>
      <th>stratif</th>
      <td><p>Data frame of survey strata, for more details see, e.g.,<a href='strata.html'>strata</a>.</p></td>
    </tr>
    <tr>
      <th>errors</th>
      <td><p>Data frame of expected coefficients of variation (CV) for each domain, for more details see, e.g.,<a href='errors.html'>errors</a>.</p></td>
    </tr>
    <tr>
      <th>des_file</th>
      <td><p>Data frame containing information on sampling design variables, for more details see, e.g.,<a href='design.html'>design</a>.</p></td>
    </tr>
    <tr>
      <th>psu_file</th>
      <td><p>Data frame containing information on primary stage units stratification, for more details see, e.g.,<a href='PSU_strat.html'>PSU_strat</a>.</p></td>
    </tr>
    <tr>
      <th>rho</th>
      <td><p>Data frame of survey strata, for more details see, e.g.,<a href='rho.html'>rho</a>.</p></td>
    </tr>
    <tr>
      <th>epsilon</th>
      <td><p>The same as in function <a href='beth1.html'>beat.1st</a>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function enables to derive the expected coefficient of variation (CV) from a given allocation.
The function <code>beat.cv</code> returns the estimates expected accuracy in terms of coefficient of variation, for several variables in different domains, given a certain allocation among the different strata.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Object of class <code>list</code>. The list contains a set of <code>data.frame</code>, as many of the cross product between domain and interest variables, containing total estimates, population, variance and expected coefficient of variation for every domain modality.
For each domain and each variable is defined</p>
<dt>Tot1</dt><dd><p>Total estimate</p></dd>
<dt>N</dt><dd><p>Measure of size</p></dd>
<dt>Varfin</dt><dd><p>The sample variance of the total estimate</p></dd>
<dt>CV</dt><dd><p>The coefficient of variation of the</p></dd>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Load example data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>beat.example</span>)

<span class='co'>## Example 1</span>
<span class='co'># Calculate coefficients of variation, for two variables in two domains,</span>
<span class='co'># given an allocation among the different strata.</span>
<span class='no'>allocation</span></div><div class='output co'>#&gt;    SIZE
#&gt; 1  4276
#&gt; 2   350
#&gt; 3    59
#&gt; 4    96
#&gt; 5    42
#&gt; 6    97
#&gt; 7    26
#&gt; 8    45
#&gt; 9    56
#&gt; 10  199
#&gt; 11   41
#&gt; 12  184
#&gt; 13  127
#&gt; 14   42
#&gt; 15  630
#&gt; 16  273
#&gt; 17  315</div><div class='input'><span class='no'>cv1</span><span class='kw'>&lt;-</span><span class='fu'>beat.cv</span>( <span class='kw'>n_file</span><span class='kw'>=</span><span class='no'>allocation</span>, <span class='kw'>stratif</span><span class='kw'>=</span><span class='no'>strata</span>, <span class='kw'>errors</span><span class='kw'>=</span><span class='no'>errors</span>,
<span class='kw'>des_file</span><span class='kw'>=</span><span class='no'>design</span>, <span class='kw'>psu_file</span><span class='kw'>=</span><span class='no'>PSU_strat</span>, <span class='kw'>rho</span><span class='kw'>=</span><span class='no'>rho</span>)

<span class='co'>## Example 2</span>
<span class='co'># Take the example 1 in beat.2st.</span>
<span class='no'>allocation2st_1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='beth2.html'>beat.2st</a></span>(<span class='kw'>stratif</span><span class='kw'>=</span><span class='no'>strata</span>, <span class='kw'>errors</span><span class='kw'>=</span><span class='no'>errors</span>,
<span class='kw'>des_file</span><span class='kw'>=</span><span class='no'>design</span>, <span class='kw'>psu_file</span><span class='kw'>=</span><span class='no'>PSU_strat</span>,<span class='kw'>rho</span><span class='kw'>=</span><span class='no'>rho</span>)</div><div class='output co'>#&gt;    iterations PSU_SR PSU NSR PSU Total   SSU
#&gt; 1           0      0       0         0  6858
#&gt; 2           1     16      79        95 17170
#&gt; 3           2     42     161       203 14736
#&gt; 4           3     33     153       186 15273
#&gt; 5           4     36     155       191 15147
#&gt; 6           5     33     156       189 15274
#&gt; 7           6     36     155       191 15146
#&gt; 8           7     33     156       189 15273
#&gt; 9           8     36     155       191 15147
#&gt; 10          9     33     156       189 15274
#&gt; 11         10     36     155       191 15146
#&gt; 12         11     33     156       189 15273
#&gt; 13         12     36     155       191 15147
#&gt; 14         13     33     156       189 15274
#&gt; 15         14     36     155       191 15146
#&gt; 16         15     33     156       189 15273
#&gt; 17         16     36     155       191 15147
#&gt; 18         17     33     156       189 15274
#&gt; 19         18     36     155       191 15146
#&gt; 20         19     33     156       189 15273
#&gt; 21         20     36     155       191 15147</div><div class='input'><span class='co'># The allocation obtained is </span>
<span class='no'>allocation2st_1</span>$<span class='no'>alloc</span></div><div class='output co'>#&gt;    STRATUM ALLOC  PROP EQUAL
#&gt; 1        1  8900  2677   891
#&gt; 2        2   939   209   891
#&gt; 3        3   147   432   891
#&gt; 4        4   278   689   891
#&gt; 5        5   108   258   891
#&gt; 6        6   219   512   891
#&gt; 7        7    95   149   891
#&gt; 8        8   157   259   891
#&gt; 9        9   137   335   891
#&gt; 10      10   403  1026   891
#&gt; 11      11    65   260   891
#&gt; 12      12   485  1027   891
#&gt; 13      13   270   692   891
#&gt; 14      14    91   213   891
#&gt; 15      15  1322  3671   891
#&gt; 16      16   612  1278   891
#&gt; 17      17   919  1461   891
#&gt; 18   Total 15147 15147 15147</div><div class='input'><span class='co'># with these precision constraints </span>
<span class='no'>errors</span></div><div class='output co'>#&gt;    DOM  CV1  CV2
#&gt; 1 DOM1 0.10 0.99
#&gt; 2 DOM2 0.99 0.99</div><div class='input'><span class='co'># and these expacted coefficient of variaction</span>
<span class='no'>allocation2st_1</span>$<span class='no'>expected</span></div><div class='output co'>#&gt;    Type Dom     V1     V2
#&gt; 1  DOM1   1 0.1000 0.0768
#&gt; 3  DOM1   2 0.0999 0.1219
#&gt; 5  DOM2   1 0.1033 0.0800
#&gt; 7  DOM2   2 0.3910 0.2749
#&gt; 9  DOM2   3 0.3387 0.3615
#&gt; 11 DOM2   4 0.5255 0.5340
#&gt; 13 DOM2   5 0.1957 0.2724
#&gt; 15 DOM2   6 0.1257 0.1507</div><div class='input'>
<span class='co'># Now, fit the output of beat.2st to allocation, that is</span>
<span class='no'>SIZE</span> <span class='kw'>&lt;-</span> <span class='no'>allocation2st_1</span>$<span class='no'>alloc</span>[-<span class='fl'>18</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>)]
<span class='no'>allocation1</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(<span class='no'>SIZE</span>)
<span class='co'># If apply beat.cv the same error in allocation2st_1$expected should be obtained.</span>
<span class='co'># In fact</span>
<span class='no'>cv2</span><span class='kw'>&lt;-</span><span class='fu'>beat.cv</span>( <span class='kw'>n_file</span><span class='kw'>=</span><span class='no'>allocation1</span>, <span class='kw'>stratif</span><span class='kw'>=</span><span class='no'>strata</span>, <span class='kw'>errors</span><span class='kw'>=</span><span class='no'>errors</span>,
<span class='kw'>des_file</span><span class='kw'>=</span><span class='no'>design</span>, <span class='kw'>psu_file</span><span class='kw'>=</span><span class='no'>PSU_strat</span>, <span class='kw'>rho</span><span class='kw'>=</span><span class='no'>rho</span>)
<span class='no'>cv2</span></div><div class='output co'>#&gt;   Type Dom        V1         V2
#&gt; 1 DOM1   1 0.1002737 0.07688799
#&gt; 2 DOM1   2 0.1006358 0.12215910
#&gt; 3 DOM2   1 0.1032735 0.07997684
#&gt; 4 DOM2   2 0.4019677 0.27834395
#&gt; 5 DOM2   3 0.3386786 0.36147314
#&gt; 6 DOM2   4 0.5254661 0.53398185
#&gt; 7 DOM2   5 0.2015243 0.27465412
#&gt; 8 DOM2   6 0.1256738 0.15067760</div><div class='input'>
# Please, note that some very slightly differences may occur.

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andrea Fasulo, Stefano Falorsi, Alessio Guandalini, Daniela Pagliuca, Marco Dionisio Terribili, Raffaella Cianchetta, Giulio Barcaroli.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


